mN.prototype.dX=Z(286,function(a){return this.k[a]||[]});Gfb.prototype.dX=Z(285,function(){return[]});bI.prototype.jda=Z(239,function(a){for(var b=Math.max(this.j.length,a.j.length),c=[],d=0;d<b;d++)c[d]=jI(this,d)|jI(a,d);return new bI(c,this.k|a.k)});
function dqc(a,b){if(0==a.length)throw Error("number format error: empty string");var c=b||10;if(2>c||36<c)throw Error("radix out of range: "+c);if("-"==a.charAt(0))return eI(dqc(a.substring(1),c));if(0<=a.indexOf("-"))throw Error('number format error: interior "-" character');for(var d=cI(Math.pow(c,8)),e=dI,f=0;f<a.length;f+=8){var h=Math.min(8,a.length-f),l=parseInt(a.substring(f,f+h),c);8>h?(h=cI(Math.pow(c,h)),e=iI(e,h).add(cI(l))):(e=iI(e,d),e=e.add(cI(l)))}return e}
function eqc(a,b){for(var c=b>>5,d=b%32,e=a.j.length+c+(0<d?1:0),f=[],h=0;h<e;h++)f[h]=0<d?jI(a,h-c)<<d|jI(a,h-c-1)>>>32-d:jI(a,h-c);return new bI(f,a.k)}function fqc(a){no(this,a,0,null)}B(fqc,mo);function gqc(a){no(this,a,0,hqc)}B(gqc,mo);var hqc=[6];gqc.prototype.vD=function(){return null!=po(this,4)?po(this,4):"us"};function iqc(a){no(this,a,0,null)}B(iqc,mo);iqc.prototype.getUrl=function(){return po(this,2)};iqc.prototype.oz=function(){return po(this,9)};function jqc(a){no(this,a,0,kqc)}B(jqc,mo);var kqc=[1];function lqc(a,b,c,d){this.k=a;this.q=b;this.j=c;this.o=d}lqc.prototype.getType=g("o");lqc.prototype.getUrl=g("q");function mqc(a,b,c){K.call(this);this.o=a;this.k=b;this.q=c;this.j={}}B(mqc,K);var nqc={1:"web",2:"drive"},oqc={1:"document",2:"presentation",3:"spreadsheet",4:"drawing",7:"link"};
function pqc(a,b){if(!Fd(Id(),"docs-els")||!a.k||!UI(a.q)||b.isEmpty())return Zl([]);var c=new gqc;qo(c,2,Ja(b.j)?b.k:b.j);qo(c,1,0);qo(c,7,0);var d={},e=new Sl,f=eb();d.linksrequest=c.Vb();c=Bo(Eo(Do(Ao(a.k.we("/links"),d).Ve("id",a.o),1),e.callback,e),e.errback,e).Ed();a.j[f]=c;return Wl(e,function(){delete this.j[f]},a).addCallback(qqc)}
function qqc(a){var b=[];if(!a)return b;a=new jqc(a.Te());a=qT(a,iqc,1);for(var c=0;c<a.length;++c){var d=a[c],e=po(d,5),f=nqc[po(d,6)],h;h=d;h=null!=po(h,7)?po(h,7):0;h=oqc[h];e&&f&&h&&b.push(new lqc(e,d.getUrl(),f,h))}return b}mqc.prototype.L=function(){for(var a in this.j)M(this.j[a]);mqc.H.L.call(this)};function rqc(a){return a=""+('<div class="docs-link-insertlinkbubble" dir="'+(a.xb?"rtl":"ltr")+'" tabIndex="1" role="dialog" aria-label="'+Gt("Edit or Insert link")+'"><div class="docs-link-insertlinkbubble-leftpane">'+Lt(a.Twa)+'</div><div class="docs-link-insertlinkbubble-rightpane">'+Lt(a.wAa)+"</div></div>")}
function sqc(a){return"<div>"+('<div class="docs-link-insertlinkbubble-urlholder" id="'+Y(a.bf.Wja)+'"><input type="text" class="docs-link-insertlinkbubble-url jfk-textinput" id="'+Y(a.bf.v4)+'" role="combobox" aria-haspopup="true" aria-autocomplete="list" aria-owns="'+Y(a.bf.JG)+'" tabIndex="0"/><div class="docs-link-insertlinkbubble-linkchip" id="'+Y(a.bf.xia)+'"></div><div class="docs-link-insertlinkbubble-suggestionholder" id="'+Y(a.bf.JG)+'" tabIndex="-1"></div></div>')+'<div class="docs-link-insertlinkbubble-buttonbar" id="'+
Y(a.bf.RL)+'"></div><div class="docs-link-insertlinkbubble-error" id="'+Y(a.bf.Wha)+'" role="alert"></div></div>'}function tqc(a){return a=""+('<label class="docs-link-insertlinkbubble-url-label" for="'+Y(a.bf.v4)+'">Link</label>')}function uqc(a){return""+rqc(Bt(a,{Twa:""+tqc(a),wAa:""+sqc(a)}))};function vqc(a,b){this.j=a;this.k=b}vqc.prototype.isEmpty=function(){return Ja(this.j+this.k)};vqc.prototype.equals=function(a){return null!=a&&this.k==a.k&&this.j==a.j};function s7(a){Bm.call(this,a);this.o=new oI;this.Ia(this.o);this.o.Pq=!1;pI(this.o,!1);this.o.j.vE=!0;By(this.o.j,1,0,void 0,void 0)}B(s7,Bm);s7.prototype.Pa=function(){s7.H.Pa.call(this);var a=this.getElement(),b=this.Q();this.Xa=b.X("DIV","docs-calloutbubble-anchor");b.appendChild(a,this.Xa);im(this.Xa,"docs-calloutbubble-anchor");this.o.uf("docs-calloutbubble-bubble");this.o.mi(this.Xa);this.o.render(a)};
s7.prototype.setVisible=function(a){if(a!=this.Qa()&&this.dispatchEvent(a?"show":"hide")){var b=this.getElement();b&&(Q(b,a),this.o.setVisible(a),this.o.yu())}};s7.prototype.Qa=function(){return this.o.Qa()};function wqc(a,b,c){Ik(a.Xa,b,c);a.o.yu()};function xqc(a){switch(a){case "document":return"Bookmark";case "presentation":return"Slide";case "spreadsheet":return"Spreadsheet";case "drawing":return"Drawing";case "link":return"Web link";case "bookmark":return"Bookmark";case "heading":return"Heading";case "slide":return"Slide"}return""};function yqc(a){var b=""+W(a.rE),b='<div class="docs-link-linksuggestion" tabIndex="0" role="option">'+('<div class="docs-link-linksuggestion-icon">'+UC({icon:"docs-icon-img "+W(b)})+"</div>")+(a.YN?zqc({qB:Dt(""+W(a.qB)),YN:Ct(""+a.YN)}):zqc({qB:Dt(""+W(a.qB))}));a.url&&(b+='<a class="docs-link-linksuggestion-testlink" id="'+Y(a.bf.Ija)+'" href="'+Y(It(a.url))+'" target="_blank" rel="noreferrer" tabIndex="0" aria-label="'+Gt("Open link in a new tab")+'">'+UC({icon:"docs-icon-img docs-icon-popout"})+
"</a>");return b+"</div>"}function zqc(a){return xt('<div class="docs-link-linksuggestion-text"><div class="docs-link-linksuggestion-title">'+W(a.qB)+"</div>"+(a.YN?'<div class="docs-link-linksuggestion-url">'+W(a.YN)+"</div>":"")+"</div>")};function Aqc(a){return a=""+('<div class="docs-link-chipselectedlinksuggestion">'+UC({icon:"docs-icon-img "+W(a.rE)})+zqc({qB:Dt(""+W(a.qB))})+'<div id="'+Y(a.bf.d3)+'" class="docs-link-chipselectedlinksuggestion-hide" tabIndex="0" aria-role="button" aria-label="'+Gt("Discard the currently selected suggestion")+'" role="button">'+UC({icon:"docs-icon-img docs-icon-close-small"})+"</div></div>")};function t7(a,b,c){Bm.call(this,c);this.o=xt(a);this.k=b;this.j=eW(this,Bqc)}B(t7,Bm);var Bqc={d3:"dllsch"};t7.prototype.Pa=function(){var a={};a.bf=this.j;a.qB=this.o;a.rE=this.k;this.aa=st(Aqc,a)};t7.prototype.xa=function(){t7.H.xa.call(this);var a=this.Q().getElement(this.j.d3);if(!a)throw Error("Hide element should have been found");qm(S(this),a,this.B)};t7.prototype.B=function(a){var b=this.getElement();Q(b,!1);this.dispatchEvent("hide");a.stopPropagation()};function u7(a,b){this.k=a;this.o=b}u7.prototype.equals=function(a){return this.o==a.o&&this.k.equals(ec(a.k))};
function Cqc(a){var b=dI;if(a instanceof bI){if(0!=a.k||0>kI(a,dI)||0<kI(a,Dqc))throw Error("The address does not look like an IPv4.");b=ec(a)}else{if(!Eqc.test(a))throw Error(a+" does not look like an IPv4 address.");var c=a.split(".");if(4!=c.length)throw Error(a+" does not look like an IPv4 address.");for(var d=0;d<c.length;d++){var e=fb(c[d]);if(isNaN(e)||0>e||255<e||1!=c[d].length&&Ea(c[d],"0"))throw Error("In "+a+", octet "+d+" is not valid");e=cI(e);b=eqc(b,8).jda(e)}}u7.call(this,b,4)}
B(Cqc,u7);var Eqc=/^[0-9.]*$/,Dqc=hI(eqc(fI,32),fI);Cqc.prototype.toString=function(){if(this.j)return this.j;for(var a=g2a(this.k,0),b=[],c=3;0<=c;c--)b[c]=String(a&255),a>>>=8;return this.j=b.join(".")};
function Fqc(a){var b=dI;if(a instanceof bI){if(0!=a.k||0>kI(a,dI)||0<kI(a,Gqc))throw Error("The address does not look like a valid IPv6.");b=ec(a)}else{if(!Hqc.test(a))throw Error(a+" is not a valid IPv6 address.");var c=a.split(":");if(-1!=c[c.length-1].indexOf(".")){a=new Cqc(c[c.length-1]);a=g2a(ec(a.k),0);var d=[];d.push((a>>>16&65535).toString(16));d.push((a&65535).toString(16));Ab(c,c.length-1);Eb(c,d);a=c.join(":")}d=a.split("::");if(2<d.length||1==d.length&&8!=c.length)throw Error(a+" is not a valid IPv6 address.");
if(1<d.length){c=d[0].split(":");d=d[1].split(":");1==c.length&&""==c[0]&&(c=[]);1==d.length&&""==d[0]&&(d=[]);var e=8-(c.length+d.length);1>e?c=[]:(Eb(c,Ob("0",e)),Eb(c,d))}if(8!=c.length)throw Error(a+" is not a valid IPv6 address");for(d=0;d<c.length;d++){e=dqc(c[d],16);if(0>kI(e,dI)||0<kI(e,Iqc))throw Error(c[d]+" in "+a+" is not a valid hextet.");b=eqc(b,16).jda(e)}}u7.call(this,b,6)}B(Fqc,u7);var Hqc=/^([a-fA-F0-9]*:){2}[a-fA-F0-9:.]*$/,Iqc=e2a(65535),Gqc=hI(eqc(fI,128),fI);
Fqc.prototype.toString=function(){if(this.j)return this.j;for(var a=[],b=3;0<=b;b--){var c=g2a(this.k,b),d=c&65535;a.push((c>>>16).toString(16));a.push(d.toString(16))}for(var c=b=-1,e=d=0,f=0;f<a.length;f++)"0"==a[f]?(e++,-1==c&&(c=f),e>d&&(d=e,b=c)):(c=-1,e=0);0<d&&(b+d==a.length&&a.push(""),a.splice(b,d,""),0==b&&(a=[""].concat(a)));return this.j=a.join(":")};var Jqc=new sW("http https ftp feed gopher mailto mms news nntp rtsp telnet aim callto ichat".split(" "));
function Kqc(a){a=Ma(a);if(""==a)return null;if("#"==a.charAt(0))return a;try{var b=Sd(1,a);if(b){b=b.toLowerCase();if(!Jqc.contains(b))return null;if("mailto"==b){var c=Td(a);a=a.replace(/^mailto/i,"mailto");return c&&uMb(c).Pd()?a:null}}else a="http://"+a;a=encodeURI(a).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%25/g,"%");var d=Qd(a);return!Lqc(a)&&d&&Mqc(d)?Nd(Sd(1,a).toLowerCase(),Rd(Sd(2,a)),d.toLowerCase(),Number(Sd(4,a))||null,Sd(5,a),Sd(6,a),xca(a)):null}catch(e){return null}}
function Lqc(a){return 2083<a.length}function Mqc(a){var b;var c=a;try{b=Ea(c,"[")&&Fa(c,"]")?new Fqc(c.substring(1,c.length-1)):new Cqc(c)}catch(d){b=null}if(b)return!0;a=a.replace(/[.\u3002\uFF0E\uFF61]/g,".");a=a.replace(/\.$/,"");if(253<a.length)return!1;a=a.split(".");if(127<a.length)return!1;for(b=0;b<a.length;b++)if(c=a[b],63<c.length||/[^0-9A-Za-z\-\_]/.test(c)||/[\-\_]$/.test(c)||/^[\-\_]/.test(c)||b==a.length-1&&/^\d/.test(c))return!1;return!0};function v7(a,b,c,d,e){Bm.call(this,e);this.k=b;this.C=xt(a);a=this.Q();this.G=a.NI(a.Hg(this.C.toString()));this.B=c;this.J=d;this.D=eW(this,Nqc);this.j=null}B(v7,Bm);var Nqc={Ija:"dlstl"};t=v7.prototype;t.getType=g("J");t.getUrl=g("k");t.k9=g("G");t.Pa=function(){v7.H.Pa.call(this);var a={};a.qB=this.C;a.rE=this.o();var b=this.B;if("infile"!=b){var c=Kqc(this.k);c&&(a.url=eBa(c))}"web"==b&&(a.YN=this.k);a.bf=this.D;this.aa=st(yqc,a,void 0,this.Q())};
t.xa=function(){v7.H.xa.call(this);(this.j=this.Q().getElement(this.D.Ija))&&qm(S(this),this.j,this.P8a);qm(S(this),this.getElement(),this.j2a)};t.P8a=function(a){a.stopPropagation()};t.j2a=function(a){if(a.altKey&&this.j)try{this.j.focus()}catch(b){}else{var c=new Oqc(this.k,this.G,this.k9(),this.B,0,this);this.dispatchEvent(c)}a.stopPropagation()};function Oqc(a,b,c,d,e,f){N.call(this,"docs-link-suggestion-linkselect",f);this.url=a;this.q=d;this.j=b;this.C=c}B(Oqc,N);function w7(a,b,c,d){v7.call(this,a,b,"infile",c,d)}B(w7,v7);w7.prototype.o=function(){var a=this.getType();switch(a){case "bookmark":return"docs-icon-bookmark";case "heading":return"docs-icon-paragraph";case "slide":return"docs-icon-presentation";default:throw Error("Unsupported Infile suggestions type encountered: "+a);}};w7.prototype.k9=function(){var a=w7.H.k9.call(this),b=this.getType();"slide"!=b&&(b=xqc(b))&&(a=b+(": "+a));return a};function Pqc(a,b){this.k=a;this.j=b||null}Pqc.prototype.getUrl=g("k");Pqc.prototype.getText=g("j");function Qqc(a,b,c){a=new Pqc(a,b);b=Lo(new Ko,1);c&&Mra(b,c);T.$T.fireAction(a,b.Da())};function Rqc(a){return a=""+('<div class="docs-link-linksuggestioncontentbox"><div class="docs-link-linksuggestioncontentbox-offlinenotice" id="'+Y(a.bf.aja)+'">Some suggestions are not available offline.</div><div class="docs-link-linksuggestioncontentbox-statusbar" id="'+Y(a.bf.Cja)+'"><div class="docs-link-linksuggestioncontentbox-statusmessage" id="'+Y(a.bf.Dja)+'"></div><div class="docs-link-linksuggestioncontentbox-statusindicator" id="'+Y(a.bf.yia)+'"></div></div><div class="docs-link-linksuggestioncontentbox-suggestion-holder" id="'+
Y(a.bf.JG)+'" role="listbox"></div>'+(a.egb?'<div class="docs-link-linksuggestioncontentbox-reference" id="'+Y(a.bf.jja)+'" tabIndex="0">'+UC({icon:"docs-icon-img docs-icon-search-this-document"})+'<div class="docs-link-linksuggestioncontentbox-referencetext" id="'+Y(a.bf.kja)+'"></div></div>':"")+"</div>")};function Sqc(){};function x7(a,b){Bm.call(this,a);this.k=b||"docs-loading-indicator";this.j=!0}B(x7,Bm);x7.prototype.Pa=function(){x7.H.Pa.call(this);var a=this.getElement();im(a,this.k);this.Qa()||Q(a,!1)};x7.prototype.setVisible=function(a){if(this.j!=a&&this.dispatchEvent(a?"show":"hide")){var b=this.getElement();b&&Q(b,a);this.j=a}};x7.prototype.Qa=g("j");function Tqc(a,b,c,d){v7.call(this,a,b,"drive",c,d)}B(Tqc,v7);Tqc.prototype.o=function(){switch(this.getType()){case "document":return"docs-icon-document";case "presentation":return"docs-icon-punch";case "spreadsheet":return"docs-icon-spreadsheet";case "drawing":return"docs-icon-drawing";default:return"docs-icon-file-blue"}};function Uqc(a){return'<div class="docs-link-infilelinksuggestiongroup-cb">'+UC({icon:"docs-icon-img docs-zippy-open",Jy:"docs-link-infilelinksuggestiongroup-cb-openarrow"})+UC({icon:"docs-icon-img docs-zippy-closed",Jy:"docs-link-infilelinksuggestiongroup-cb-closearrow"})+'<div class="docs-link-infilelinksuggestiongroup-cb-title">'+W(a.title)+"</div></div"};function y7(a,b,c){Bm.call(this,c);for(c=0;c<a.length;++c)this.Ia(a[c],!0);this.D=b;this.k=-1}B(y7,Bm);t=y7.prototype;t.Pa=function(){y7.H.Pa.call(this);im(this.getElement(),"docs-link-linksuggestiongroup")};t.xa=function(){y7.H.xa.call(this);S(this).F(this.getElement(),"keydown",this.gQa)};t.gQa=function(a){if(Zk(this.pb())){var b;switch(a.keyCode){case 38:b=-1;break;case 40:b=1;break;default:return}this.Lca(this.k+b)&&(a.preventDefault(),a.stopPropagation())}};
t.Lca=function(a){if(0>a||a==this.Sb())return!1;try{this.dc(a).getElement().focus(),this.k=a}catch(b){return!1}return!0};t.q7=function(){if(0<this.Sb())try{this.dc(0).getElement().focus(),this.k=0}catch(a){}};t.lW=function(){if(0<this.Sb())try{var a=this.Sb();this.dc(a-1).getElement().focus();this.k=a-1}catch(b){}};function z7(a,b,c){this.G=a;this.j=this.B=this.C=this.o=null;y7.call(this,b,"infile",c)}B(z7,y7);t=z7.prototype;t.Pa=function(){z7.H.Pa.call(this);var a=this.Q(),b=this.getElement();this.j=st(Uqc,{title:this.G});this.o=a.X("DIV");this.C=new kM(this.j,this.o);a.appendChild(b,this.j);a.appendChild(b,this.o)};t.pb=function(){if(!this.o)throw Error("No suggestion holder found in infile link suggestion group");return this.o};
t.xa=function(){z7.H.xa.call(this);this.B||(this.B=new ym(this.j),L(this,this.B));S(this).F(this.C,"toggle",this.y8a).F(this.j,"keypress",this.T1a).F(this.B,"focusout",this.fYa)};t.fYa=function(){km(this.j,"docs-link-infilelinksuggestiongroup-cb-keyboardfocus")};t.T1a=function(a){13==a.keyCode&&(a.stopPropagation(),a.preventDefault())};t.y8a=function(a){mm(this.j,"docs-link-infilelinksuggestiongroup-cb-open",a.nD)};t.q7=function(){Vqc(this)};t.lW=function(){this.C.Tw()?z7.H.lW.call(this):Vqc(this)};
t.Lca=function(a){var b=document.activeElement==this.j;return-1!=a||b?z7.H.Lca.call(this,a):Vqc(this)};function Vqc(a){try{return a.j.focus(),im(a.j,"docs-link-infilelinksuggestiongroup-cb-keyboardfocus"),a.k=-1,!0}catch(b){}return!1};function Wqc(a,b,c,d){v7.call(this,a,b,"web",c,d)}B(Wqc,v7);Wqc.prototype.o=q("docs-icon-web-result");function Xqc(a){a=mb(a,Yqc);a=Vaa(a,function(a){return a.B});var b=[];Tb(a,function(a,d){switch(d){case "infile":Eb(b,Zqc(a));break;case "drive":case "web":b.push(new y7(a,d));break;default:throw Error("Unknow corpus type: "+d);}});return b}function Yqc(a){var b=a.getUrl(),c=a.k,d=a.j;a=a.getType();switch(d){case "web":return new Wqc(c,b,a);case "drive":return new Tqc(c,b,a);case "infile":return new w7(c,b,a);default:throw Error("Unknown corpus: "+d);}}
function Zqc(a){var b=[];a=Vaa(a,function(a){return a.getType()});Tb(a,function(a,d){b.push(new z7($qc(d),a))});return b}function $qc(a){switch(a){case "bookmark":return"Bookmarks";case "heading":return"Headings";case "slide":return"Slides in this presentation";default:throw Error("Unknown infile suggestion type: "+a);}}function arc(a,b){return brc[a.D]-brc[b.D]}function crc(a){if(!a)return!1;try{return!!Sd(1,a)&&!!Qd(a)}catch(b){return!1}}
function A7(a){var b;if(b=!!a)b=a.match("(?:mailto:)?([\\w.+-]+@[A-Za-z0-9.-]+\\.(?:com|org|net|edu|gov|aero|biz|cat|coop|info|int|jobs|mobi|museum|name|pro|travel|arpa|asia|xxx|[a-z][a-z])\\b)"),b=(null!=b?b[0]:"")==a;return b}function drc(a){return Sd(1,a)?a.substring(a.indexOf(":")+1):a}var brc={infile:0,web:1,drive:2};function erc(a){Bm.call(this,a);this.B=eW(this,frc);this.j=[];this.K=this.D=this.P=this.V=null;this.C=new x7(a,"docs-loading-indicator-small");this.Ia(this.C);this.J=new YC(this);this.J.gc(T.Mi,jq,this.fQa);this.J.gc(T.vU,jq,this.X5a);L(this,this.J);this.G=this.M=this.o=null;this.k=-1}B(erc,Bm);var frc={yia:"dllscli",aja:"dllscon",jja:"dllscr",kja:"dllscrt",Cja:"dllscsb",Dja:"dllscsm",JG:"dllscsh"};t=erc.prototype;t.Pa=function(){var a={};a.bf=this.B;a.egb=Fd(Id(),"docs-ereft");this.aa=st(Rqc,a)};
t.xa=function(){erc.H.xa.call(this);var a=this.Q();this.P=a.getElement(this.B.Cja);this.V=a.getElement(this.B.Dja);this.D=a.getElement(this.B.aja);this.K=a.getElement(this.B.JG);var b=a.getElement(this.B.yia);b&&!this.C.getElement()&&this.C.render(b);grc(this,"i");if(this.o=a.getElement(this.B.jja))this.M=a.getElement(this.B.kja),qm(S(this),this.o,this.Y5a);S(this).F(this.getElement(),"keydown",this.eQa);this.D&&Q(this.D,!T.Mi.isEnabled());hrc(this)};t.fQa=function(){this.D&&Q(this.D,!T.Mi.isEnabled())};
t.X5a=function(){hrc(this)};function hrc(a){if(a.o){var b=crc(a.G),b=T.vU.isEnabled()&&!!a.G&&!b&&!A7(a.G);Q(a.o,b)}}t.eQa=function(a){var b=!1;switch(a.keyCode){case 40:b=irc(this,1);break;case 38:b=irc(this,-1)}b&&(a.preventDefault(),a.stopPropagation())};function jrc(a){if(a.o&&Zk(a.o))try{return a.o.focus(),!0}catch(b){}return!1}
function irc(a,b){var c,d=document.activeElement==a.o;c=a.k+b;if(c>a.j.length||0>c)return a.k=-1,!1;if(c==a.j.length){if(d||!jrc(a))return a.k=-1,!1;a.k=a.j.length;return!0}1==b?a.j[c].q7():a.j[c].lW();a.k=c;return!0}t.Y5a=function(a){var b=new Sqc,c=Lo(new Ko,9).Da();T.vU.fireAction(b,c);a.stopPropagation()};
function grc(a,b){if(a.getElement()){var c=a.Q(),d=a.V,e=a.P;a.pb();switch(b){case "f":c.Pf(d,"Unable to retrieve suggestions at this time.");Q(e,!0);Q(d,!0);a.C.setVisible(!1);break;case "i":Q(d,!1);Q(e,!1);a.C.setVisible(!1);break;case "s":c.Pf(d,"Searching\u2026"),Q(e,!0),Q(d,!0),a.C.setVisible(!0)}}}t.pb=function(){if(this.K)return this.K;throw Error("Suggestion holder not found");};
function krc(a,b,c){var d=[];if(c)lrc(a);else{d=a.j;for(c=0;c<a.j.length;++c)a.removeChild(a.j[c],!0);a.j=[]}b=d=Cb(d,b);Kb(b,arc);d=b;for(c=0;c<d.length;++c)a.Ia(d[c],!0),a.j.push(d[c]);a.k=-1;a.pb().scrollTop=0}function lrc(a){for(var b=0;b<a.j.length;++b)a.removeChild(a.j[b],!0),M(a.j[b]);a.j=[];a.k=-1}function mrc(a,b){a.G=b;if(a.M){var c=a.Q();hrc(a);b&&c.Pf(a.M,"Find more")}};function B7(a,b,c,d){s7.call(this,d);this.Bj=a;this.j=new bU("Paste a link, or search",d);this.Ia(this.j);this.J=eW(this,nrc);this.B=new erc(d);this.Ia(this.B);this.Va=My("Apply",d);this.Ia(this.Va);this.P=new Mo(this.gT,200,this);L(this,this.P);this.Si=!!c;this.Cb=null;this.V=!1;this.ba=this.G=this.D=null;this.Ub=!1;this.M=null;this.Ud=!1;this.Oa=this.C=null;this.jf=!1}B(B7,s7);var nrc={RL:"dlbbb",Wha:"dlbem",xia:"dlblc",JG:"dlbsh",Wja:"dlbuh",v4:"dlbui"},orc=["mousedown","click","contextmenu","paste"];
t=B7.prototype;t.Pa=function(){B7.H.Pa.call(this);var a={bf:{}};hc(a.bf,this.J,this.Apa());a.xb=this.Si;a=st(this.Una(),a);this.o.setContent(a)};t.Una=function(){return uqc};t.Apa=function(){return{}};
t.initialize=function(){var a=this.Q(),b=a.getElement(this.J.v4);if(!b)throw Error("URL input element should be present");this.j.Ta(b);this.D=a.getElement(this.J.JG);if(!this.D)throw Error("Suggestion holder element should be present");this.B.render(this.D);var c=a.getElement(this.J.RL);if(!c)throw Error("Button bar element should be present");this.Va.render(c);this.bi=new iy(b);L(this,this.bi);this.Uc=new ym(this.o.pb());L(this,this.Uc);this.hg=new ym(b);L(this,this.hg);this.G=a.getElement(this.J.Wja);
if(!this.G)throw Error("URL Holder element should have been present.");this.ai=new ym(this.G);L(this,this.ai);b=this.o.pb().firstChild;this.td=new gy(b,this.Q());L(this,this.td);hy(this.td);this.ge=new Ot(this.getElement());L(this,this.ge);this.Oa=a.getElement(this.J.Wha)};
t.xa=function(){B7.H.xa.call(this);this.Ud||(this.initialize(),this.Ud=!0);S(this).F(this.bi,"input",this.E9a).F(this.j.getElement(),"keydown",this.S1a).F(this.B,"docs-link-suggestion-linkselect",this.x8a).F(this.B.getElement(),"keydown",this.R1a).F(this.Uc,"focusout",this.aQa).F(this.ai,"focusout",this.f0a).F(this.hg,"focusin",this.d0a).F(this.Va,"action",this.$Pa).F(this.getElement(),orc,this.dQa).F(this.D,"mousedown",this.v3a).F(this.ge,"key",this.bQa).F(this.getElement(),"keyup",this.cQa);C7(this,
!1)};t.gcb=function(){var a=document.activeElement;this.Q().contains(this.G,a)||D7(this,!1)};t.v3a=function(){Hg(A(this.Egb,this,document.activeElement),0)};t.Egb=function(a){if(document.activeElement==this.D)try{a.focus()}catch(b){}};t.f0a=function(){Hg(this.gcb,0,this)};t.d0a=function(){this.gT();prc(this,!1)};function prc(a,b){sh(a.G,b);sh(a.j.getElement(),!b)}
t.S1a=function(a){if(a.target)switch(a.keyCode){case 38:var b=this.B;jrc(b)?b.k=b.j.length:0<b.j.length&&(b.j[b.j.length-1].lW(),b.k=b.j.length-1);a.stopPropagation();a.preventDefault();break;case 40:b=this.B,0<b.j.length?(b.j[0].q7(),b.k=0):jrc(b)&&(b.k=b.j.length),a.stopPropagation(),a.preventDefault()}};t.R1a=function(a){if(!a.Xa)switch(a.keyCode){case 40:case 38:E7(this),a.stopPropagation()}};
function D7(a,b,c){c&&(lrc(a.B),a.M=null);a.D&&(b&&(b=a.B,b=Zk(b.D)||Zk(b.P)||0<b.j.length||!!b.o&&Zk(b.o)),Q(a.D,b&&a.Q().contains(a.G,document.activeElement)))}t.J$a=function(){if(!this.isDisposed()){var a=this.o.pb();a&&this.Q().contains(a,document.activeElement)||this.setVisible(!1)}};t.aQa=function(){Hg(this.J$a,0,this)};t.dQa=function(a){a.stopPropagation()};t.cQa=function(a){27==a.keyCode&&(Zk(this.D)?(E7(this),D7(this,!1),a.stopPropagation()):this.setVisible(!1))};
t.bQa=function(a){13==a.keyCode&&(C7(this,!Kqc(this.j.Y())),this.jf?Zk(this.D)&&D7(this,!1):this.cba(),a.stopPropagation())};t.$Pa=function(){C7(this,!Kqc(this.j.Y()));Zk(this.Oa)||this.cba()};function qrc(a){a.dispatchEvent(new rrc(a))}t.Aea=function(a){this.j.Na(a.url);F7(this);src(this,a.C)||E7(this);this.ba=a.q;qrc(this);D7(this,!1);C7(this,!1)};t.x8a=function(a){prc(this,!0);this.Aea(a)};t.E9a=function(){qrc(this);C7(this,!1);F7(this);this.ba=null;this.gT()};t.B5=function(){return Ma(this.j.Y())};
function C7(a,b){(a.jf=b)&&a.q.Pf(a.Oa,Lqc(a.j.Y())?"Links must be less than 2083 characters long":"Link doesn't look right. Typo?");a.Oa&&Q(a.Oa,b);mm(a.j.getElement(),"docs-link-insertlinkbubble-url-error",b)}function F7(a){a.Va.ga(""!=a.j.Y())}
function src(a,b){var c=a.Q().getElement(a.J.xia);if(!c)return!1;var d=a.j.Y();if("#"!=d.charAt(0))return!1;for(var e=!1,f=Xqc([]),h,l=0;l<f.length&&!h;++l)a:{h=f[l];for(var m=d,n=h.Sb(),p=0;p<n;++p){var r=h.dc(p);if(r.getUrl()==m){h=r;break a}}h=null}h&&h instanceof w7&&(b&&fm(c,"Link selected: "+b),Q(a.j.getElement(),!1),d=h,d=new t7(d.C.toString(),d.o(),d.Q()),a.C=d,a.Ia(a.C),a.C.render(c),document.activeElement!=a.j.getElement()&&a.kpa(),pm(S(a),a.C,"hide",a.QXa),e=!0);ng(f);return e}
t.QXa=function(){trc(this);E7(this)};function trc(a){a.C&&(a.removeChild(a.C,!0),a.C.dispose(),Q(a.j.getElement(),!0),a.j.clear(),F7(a),a.C=null)}function urc(a){a=a.j.Y();if(A7(a))return Sd(1,a)?a:"mailto:"+a;if(!Kqc(a))throw Error("Insert link called with invalid URL");if(dBa(a)){var b=Rd(xca(a));b&&(a="#"+b)}return a}t.kW=function(){var a=new nq,b=new fqc;switch(this.ba){case "web":qo(b,4,0);break;case "drive":qo(b,4,1);break;case "infile":qo(b,4,2)}qo(b,2,this.Ub);so(a,18,b);return a};
t.cba=function(){var a=urc(this);this.setVisible(!1);Qqc(a,void 0,this.kW())};t.ZW=function(){return new vqc(this.j.Y(),"")};
t.gT=function(){var a;(a=this.C)||(a=this.j.Y(),a=crc(a)||A7(a));if(a)D7(this,!1),this.P.stop();else if(a=this.ZW(),mrc(this.B,this.B5()),a.equals(this.M))grc(this.B,"i"),D7(this,!0),this.P.stop();else if(D7(this,!0,!0),a.equals(this.Cb)){grc(this.B,"s");var b=Xqc([]);vrc(this);krc(this.B,b,!0);D7(this,!0);this.M=null;Ul(pqc(this.Bj,a),za(this.Bta,a),za(this.Bta,a,[]),this);this.P.stop()}else this.Cb=a,this.P.start()};
t.Bta=function(a,b){var c=Xqc(b);!this.M&&a.equals(this.ZW())&&(this.M=a,vrc(this),krc(this.B,c,!1),grc(this.B,"i"),D7(this,!0))};function vrc(a){if(document.activeElement!=a.j.getElement())try{prc(a,!0),a.G.focus()}catch(b){}}t.kpa=function(){try{this.G&&this.G.focus()}catch(a){}};t.reset=function(){this.j.reset();F7(this);this.Ub=!1;this.ba=null;qrc(this);trc(this);D7(this,!1,!0);this.M=null;mrc(this.B,null)};
t.setVisible=function(a,b){B7.H.setVisible.call(this,a);b&&this.reset();a?(C7(this,!1),this.gT()):this.Cb=null};function E7(a){try{Zk(a.j.getElement())?a.j.hj():vrc(a)}catch(b){}}function rrc(a){N.call(this,"uu",a)}B(rrc,N);function wrc(a){var b;b=""+('<label id="'+W(a.bf.Jja)+'" class="docs-link-insertlinkbubble-text-label" for='+W(a.bf.l4)+">Text</label>");return""+rqc(Bt(a,{Twa:""+b+tqc(a),wAa:""+('<input type="text" class="docs-link-insertlinkbubble-text jfk-textinput" id="'+W(a.bf.l4)+'"/>')+sqc(a)}))};function G7(a,b,c,d){B7.call(this,a,0,c,d);this.k=new bU(void 0,d);this.Ia(this.k);this.Bb=null;this.fb=eW(this,xrc);this.Ua=this.lb=!1;this.K=null}B(G7,B7);var xrc={l4:"dlbti",Jja:"dlbtil"},yrc=["footnote","horizontal_rule"],zrc=["inline"];t=G7.prototype;t.Una=function(){return wrc};t.Apa=g("fb");
t.initialize=function(){G7.H.initialize.call(this);var a=this.Q();this.K=a.getElement(this.fb.l4);if(!this.K)throw Error("No input element found");this.k.Ta(this.K);this.tc=new iy(this.K);L(this,this.tc);this.Bb=a.getElement(this.fb.Jja)};t.xa=function(){G7.H.xa.call(this);S(this).F(this.tc,"input",this.wWa)};t.wWa=function(){this.Ua=!0};t.B5=function(){var a=G7.H.B5.call(this);return a?a:this.k.isEnabled()?Ma(this.k.Y()):null};
t.cba=function(){var a=urc(this),b;this.k.isEnabled()&&(b=this.k.Y(),Ja(Ma(b))&&(b=A7(a)?drc(a):a),this.k.Na(b));this.setVisible(!1);Qqc(a,b,this.kW())};t.ZW=function(){var a=G7.H.ZW.call(this);if(this.k.isEnabled())var b=this.k.Y(),a=new vqc(a.j,b);return a};
t.setContent=function(a,b,c){if(null!=b){b&&(this.Ua=!0);this.lb=!!b;c=c?Arc(c):!0;var d=!(!b.match(Gka)&&!b.match(Fka));!d&&c||this.k.ga(!1);c?d?this.k.Na("Cannot edit multi-paragraph selection."):(Q(this.k.getElement(),!0),Q(this.Bb,!0),this.k.ga(!0),this.k.Na(b)):(Q(this.k.getElement(),!1),Q(this.Bb,!1));this.V|=1}null!=a&&(this.ba=null,""!=a&&(this.Ub=!0,a=cBa(a),A7(a)&&(a=drc(a))),this.j.Na(a),F7(this),src(this),qrc(this),C7(this,!1),this.V=!0);this.V&&(this.gT(),this.V=!1)};
t.kpa=function(){try{this.K&&this.K.focus()}catch(a){}};t.Aea=function(a){G7.H.Aea.call(this,a);this.k.isEnabled()&&!this.Ua&&a.j&&this.k.Na(a.j)};t.kW=function(){var a=G7.H.kW.call(this),b=ro(a,fqc,18);qo(b,1,this.lb);var c=this.k.isEnabled()&&this.k.Y();c&&(c=c==urc(this),qo(b,3,c));return a};t.reset=function(){G7.H.reset.call(this);this.Ua=!1;this.k.ga(!0);this.lb=!1;Q(this.k.getElement(),!0);this.k.reset()};
function Arc(a){var b=a.um().getSelection().aUb();if(!b)return!0;a=Ifb(a.getModel(),b.jn(),Ez(b));for(var b=a.mL,c=0;c<b.length;++c)if(b[c].KD().getArray().length&&sb(yrc,b[c].getType()))return!1;for(c=0;c<zrc.length;++c)if(0<a.dX(zrc[c]).length)return!1;return!0};function Brc(a,b,c,d,e,f,h,l){this.C=e;this.k=b;this.D=c;this.o=d;this.q=new mqc(a,f,l);this.B=h;this.j=null;T.$T.ga(!0);this.O=new R(this);T.$T.subscribe("action",this.Pva,this)}B(Brc,K);t=Brc.prototype;
t.smb=function(){Ue&&DE(this.o).ga(!1);this.j||(this.j=new G7(this.q,0,Xe(ye.getInstance())),this.j.render(this.o.mz()),this.O.F(this.j,"hide",this.rmb).F(this.j.getElement(),"mouseup",this.tmb));var a=zE(this.o);a&&a.IF(!0);this.j.setVisible(!0,!0);var b=jv(this.k),a=$u(this.k,b);if(Ue){var b=a.getRawValue(this.k.jb(),b.y,b.x),c=a.getRawHyperlink();this.j.setContent(dq(b)?c:b,a.getDisplayValue())}else this.j.setContent(a.getRawHyperlink(),a.getDisplayValue());Crc(this)};
function Crc(a){if(a.j.Qa()){var b=cv(a.k,jv(a.k)),c=Mx(a.o.j,b),b=Bx(a.o.j,tf(b,"r"),"r");wqc(a.j,c.left,c.top+b);Hg(function(){E7(this.j);this.B.j(2)},0,a)}}
t.Pva=function(a){var b=a.getUrl();if(b){"#"==b[0]&&(b=yca(window.location.href,b.substring(1)));var b=b.replace('"','""'),c=a.getText(),c=c?c.replace(/"/g,'""'):b,d=new sK(this.k,kv(this.k),!1);this.C.Mb(d);a=jv(this.k);Ue&&b==c?d=FXa(this.k,a,b):(b='=HYPERLINK("'+b+'"'+zUa(this.D)+'"'+c+'")',d=new kF(this.k,a,b));this.C.Mb(d);b="Link inserted in "+(Ds(a)+".");Dn(b);T.Lo.ga(!0)}};t.rmb=function(a){a.target==this.j&&(Ue&&DE(this.o).ga(!0),this.B.j(3))};
t.L=function(){T.$T.unsubscribe("action",this.Pva,this);M(this.j);this.q.dispose();Brc.H.L.call(this)};t.tmb=function(a){a.stopPropagation()};function Drc(){K.call(this)}B(Drc,pn);Drc.prototype.j=function(){return Brc};xn("links",Drc);
